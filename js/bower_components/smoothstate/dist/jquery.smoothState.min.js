!function(t,n,o,e){"use strict";if(!n.history.pushState)return t.fn.smoothState=function(){return this},void(t.fn.smoothState.options={});if(!t.fn.smoothState){var r=t("html, body"),a=n.console||!1,i={anchors:"a",prefetch:!1,blacklist:".no-smoothstate, [target]",development:!1,pageCacheSize:0,alterRequestUrl:function(t){return t},onStart:{duration:0,render:function(){r.scrollTop(0)}},onProgress:{duration:0,render:function(){r.css("cursor","wait"),r.find("a").css("cursor","wait")}},onEnd:{duration:0,render:function(t,n,o){r.css("cursor","auto"),r.find("a").css("cursor","auto"),n.html(o)}},callback:function(){}},s={isExternal:function(t){var o=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof o[1]&&o[1].length>0&&o[1].toLowerCase()!==n.location.protocol?!0:"string"==typeof o[2]&&o[2].length>0&&o[2].replace(new RegExp(":("+{"http:":80,"https:":443}[n.location.protocol]+")?$"),"")!==n.location.host?!0:!1},stripHash:function(t){return t.replace(/#.*/,"")},isHash:function(t,o){o=o||n.location.href;var e=t.indexOf("#")>-1?!0:!1,r=s.stripHash(t)===s.stripHash(o)?!0:!1;return e&&r},shouldLoad:function(t,n){var o=t.prop("href");return!s.isExternal(o)&&!s.isHash(o)&&!t.is(n)},htmlDoc:function(n){var o,e=t(),r=/<(\/?)(html|head|body|title|base|meta)(\s+[^>]*)?>/gi,a="ss"+Math.round(1e5*Math.random()),i=n.replace(r,function(n,o,r,i){var s={};return o||(t.merge(e,t("<"+r+"/>")),i&&t.each(t("<div"+i+"/>")[0].attributes,function(t,n){s[n.name]=n.value}),e.eq(-1).attr(s)),"<"+o+"div"+(o?"":' id="'+a+(e.length-1)+'"')+">"});return e.length?(o||(o=t("<div/>")),o.html(i),t.each(e,function(t){var n=o.find("#"+a+t).before(e[t]);e.eq(t).html(n.contents()),n.remove()}),o.children().unwrap()):t(n)},clearIfOverCapacity:function(t,n){return Object.keys||(Object.keys=function(t){var n,o=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.push(n);return o}),Object.keys(t).length>n&&(t={}),t},getContentById:function(n,o){o=o instanceof jQuery?o:s.htmlDoc(o);var e=o.find(n),r=e.length?t.trim(e.html()):o.filter(n).html(),a=r.length?t(r):null;return a},storePageIn:function(t,n,o){return o=o instanceof jQuery?o:s.htmlDoc(o),t[n]={status:"loaded",title:o.find("title").text(),html:o},t},triggerAllAnimationEndEvent:function(n,o){o=" "+o||"";var e=0,r="animationstart webkitAnimationStart oanimationstart MSAnimationStart",a="animationend webkitAnimationEnd oanimationend MSAnimationEnd",i="allanimationend",c=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e++)},l=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e--,0===e&&n.trigger(i))};n.on(r,c),n.on(a,l),n.on("allanimationend"+o,function(){e=0,s.redraw(n)})},redraw:function(t){t.height()}},c=function(o){if(null!==o.state){var e=n.location.href,r=t("#"+o.state.id),a=r.data("smoothState");a.href===e||s.isHash(e,a.href)||a.load(e,!0)}},l=function(e,i){var c=t(e),l=null,u={},d=n.location.href,h=function(n,o){if(o=o||null,!u.hasOwnProperty(n)){u=s.clearIfOverCapacity(u,i.pageCacheSize),u[n]={status:"fetching"};var e=i.alterRequestUrl(n)||n,r=t.ajax(e,{dataType:"html"});r.success(function(t){s.storePageIn(u,n,t),c.data("smoothState").cache=u}),r.error(function(){u[n].status="error"}),o&&r.complete(o)}},f=function(e){var d="#"+c.prop("id"),h=u[e]?s.getContentById(d,u[e].html):null;h?(o.title=u[e].title,c.data("smoothState").href=e,i.onEnd.render(e,c,h,u[e].html),c.one("ss.onEndEnd",function(){if(i.callback(e,c,h,u[e].html),l){var n=t(l,c);r.scrollTop(n.offset().top),l=null}}),n.setTimeout(function(){c.trigger("ss.onEndEnd")},i.onEnd.duration)):!h&&i.development&&a?a.warn("No element with an id of "+d+" in response from "+e+" in "+u):n.location=e},p=function(t,o){o=o||!1;var e=!1,r=!1,s={loaded:function(){var a=e?"ss.onProgressEnd":"ss.onStartEnd";r&&e?r&&f(t):c.one(a,function(){f(t)}),o||n.history.pushState({id:c.prop("id")},u[t].title,t)},fetching:function(){e||(e=!0,c.one("ss.onStartEnd",function(){i.onProgress.render(t,c,null),n.setTimeout(function(){c.trigger("ss.onProgressEnd"),r=!0},i.onStart.duration)})),n.setTimeout(function(){u.hasOwnProperty(t)&&s[u[t].status]()},10)},error:function(){i.development&&a?a.log("There was an error loading: "+t):n.location=t}};u.hasOwnProperty(t)||h(t),i.onStart.render(t,c,null),n.setTimeout(function(){c.trigger("ss.onStartEnd")},i.onStart.duration),s[u[t].status]()},m=function(n){var o=t(n.currentTarget),e=o.prop("href");s.shouldLoad(o,i.blacklist)&&(n.stopPropagation(),h(e))},g=function(n){var o=t(n.currentTarget),e=o.prop("href");n.metaKey||n.ctrlKey||!s.shouldLoad(o,i.blacklist)||(n.stopPropagation(),n.preventDefault(),l=o.prop("hash"),p(e))},v=function(t){t.on("click",i.anchors,g),i.prefetch&&t.on("mouseover touchstart",i.anchors,m)},S=function(t){var o=c.addClass(t).prop("class");c.removeClass(o),n.setTimeout(function(){c.addClass(o)},0),c.one("ss.onStartEnd ss.onProgressEnd ss.onEndEnd",function(){c.removeClass(t)})},E=function(){var t=c.prop("class");c.removeClass(t),s.redraw(c),c.addClass(t)};return i=t.extend({},t.fn.smoothState.options,i),null===n.history.state&&n.history.replaceState({id:c.prop("id")},o.title,d),s.storePageIn(u,d,o.documentElement.outerHTML),s.triggerAllAnimationEndEvent(c,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),v(c),{href:d,cache:u,load:p,fetch:h,toggleAnimationClass:S,restartCSSAnimations:E}},u=function(n){return this.each(function(){this.id&&!t.data(this,"smoothState")?t.data(this,"smoothState",new l(this,n)):!this.id&&a&&a.warn("Every smoothState container needs an id but the following one does not have one:",this)})};n.onpopstate=c,t.smoothStateUtility=s,t.fn.smoothState=u,t.fn.smoothState.options=i}}(jQuery,window,document);